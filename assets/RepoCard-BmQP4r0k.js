import{u as y,f as $,t as w,g as m,h as C,i as R,j as S,k as x,o as p,w as B,c as f,l as _,m as t,d as s,n as l,p as G,C as D,_ as E}from"./app-LKTvrhfs.js";const g=y("__VUEPRESS_GITHUB_REPO__",{});function F(r){const c=$(()=>{const n=w(r),[o="",d=""]=n.split("/");return{owner:o,name:d}}),i=m(null),e=m(!1);async function h(){var v;const{owner:n,name:o}=c.value;if(!n||!o)return;const d=`${n}/${o}`,u=g.value[`${n}/${o}`];if((v=u==null?void 0:u.info)!=null&&v.name&&Date.now()-u.updatedAt<=864e5){i.value=u.info,e.value=!0;return}e.value=!1;try{const a=await fetch(`https://api.pengzhanbo.cn/github/repo/${n}/${o}`).then(b=>b.json());e.value=!0,a.convertStars=k(a.stars),a.convertForks=k(a.forks),i.value=a,g.value[d]={info:a,updatedAt:Date.now()}}catch(a){e.value=!0,console.error("github repo error:",a)}}return C(c,h,{immediate:!0}),{data:i,loaded:e}}function k(r){return r<1e3?r:`${(r/1e3).toFixed(1)}k`}const N={key:0,class:"vp-repo-card"},T={class:"repo-name"},V={class:"repo-link"},z=["href","title"],O={class:"repo-visibility"},j={class:"repo-desc"},A={class:"repo-info"},I={key:0},L=["title"],P=["title"],U=["title"],H=R({__name:"RepoCard",props:{repo:{}},setup(r){const c=r,{loaded:i,data:e}=F(S(c,"repo"));return(h,n)=>(p(),x(t(D),null,{default:B(()=>{var o;return[t(i)&&((o=t(e))!=null&&o.name)?(p(),f("div",N,[s("p",T,[n[0]||(n[0]=s("span",{class:"vpi-github-repo"},null,-1)),s("span",V,[s("a",{href:t(e).url,target:"_blank",rel:"noopener noreferrer",class:"no-icon",title:t(e).fullName},l(t(e).ownerType==="Organization"?t(e).fullName:t(e).name),9,z)]),s("span",O,l(t(e).visibility+(t(e).template?" Template":"")),1)]),s("p",j,l(t(e).description),1),s("div",A,[t(e).language?(p(),f("p",I,[s("span",{class:"repo-language",style:G({"background-color":t(e).languageColor})},null,4),s("span",null,l(t(e).language),1)])):_("",!0),s("p",{title:`Github Stars: ${t(e).stars}`},[n[1]||(n[1]=s("span",{class:"vpi-github-star"},null,-1)),s("span",null,l(t(e).convertStars),1)],8,L),s("p",{title:`Github Forks: ${t(e).forks}`},[n[2]||(n[2]=s("span",{class:"vpi-github-fork"},null,-1)),s("span",null,l(t(e).convertForks),1)],8,P),t(e).license?(p(),f("p",{key:1,title:`Github License: ${t(e).license.name}`},[n[3]||(n[3]=s("span",{class:"vpi-github-license"},null,-1)),s("span",null,l(t(e).license.name),1)],8,U)):_("",!0)])])):_("",!0)]}),_:1}))}}),J=E(H,[["__scopeId","data-v-8fc119d1"]]);export{J as R};
